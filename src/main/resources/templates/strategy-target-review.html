<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Strategy & Target Review</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #1e3c72;
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #2a5298;
            font-size: 1.3rem;
            margin-bottom: 15px;
            margin-top: 25px;
        }

        .strategy-score {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .assessment-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-left: 10px;
        }

        .excellent { background: #27ae60; color: white; }
        .good { background: #2ecc71; color: white; }
        .needs-minor-updates { background: #f39c12; color: white; }
        .needs-major-updates { background: #e67e22; color: white; }
        .outdated { background: #e74c3c; color: white; }

        .target-review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .target-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }

        .target-symbol {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 15px;
        }

        .target-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .target-current, .target-recommended {
            text-align: center;
        }

        .target-current h4, .target-recommended h4 {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .target-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .change-indicator {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .increase { background: #e8f5e8; color: #27ae60; }
        .decrease { background: #ffeaa7; color: #e17055; }
        .maintain { background: #ddd; color: #636e72; }

        .realistic { background: #e8f5e8; color: #27ae60; }
        .optimistic { background: #fff3cd; color: #856404; }
        .conservative { background: #cce5ff; color: #004085; }
        .unrealistic { background: #f8d7da; color: #721c24; }

        .list-section {
            margin: 20px 0;
        }

        .list-section ul {
            list-style: none;
            padding: 0;
        }

        .list-section li {
            background: white;
            margin: 8px 0;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .holdings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .holding-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }

        .holding-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .holding-symbol {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1e3c72;
        }

        .fit-score {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .performance-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            margin: 5px 0;
        }

        .excellent-perf { background: #27ae60; color: white; }
        .good-perf { background: #2ecc71; color: white; }
        .fair-perf { background: #f39c12; color: white; }
        .poor-perf { background: #e74c3c; color: white; }
        .underperforming { background: #8e44ad; color: white; }

        .recommendation-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin: 5px 0;
        }

        .increase-rec { background: #27ae60; color: white; }
        .maintain-rec { background: #3498db; color: white; }
        .reduce-rec { background: #f39c12; color: white; }
        .sell-rec { background: #e74c3c; color: white; }

        .action-plan {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .action-plan h3 {
            color: white;
            margin-bottom: 15px;
        }

        .action-plan ul {
            list-style: none;
            padding: 0;
        }

        .action-plan li {
            background: rgba(255,255,255,0.1);
            margin: 8px 0;
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 3px solid rgba(255,255,255,0.3);
        }

        .summary-recommendations {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .summary-recommendations h3 {
            color: white;
            margin-bottom: 15px;
        }

        .summary-recommendations ul {
            list-style: none;
            padding: 0;
        }

        .summary-recommendations li {
            background: rgba(255,255,255,0.1);
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid rgba(255,255,255,0.3);
            font-size: 1.05rem;
        }

        .market-timing {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .market-timing h3 {
            color: white;
            margin-bottom: 15px;
        }

        .market-phase {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .target-review-grid,
            .holdings-grid {
                grid-template-columns: 1fr;
            }

            .target-comparison {
                grid-template-columns: 1fr;
            }

            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>📈 Investment Strategy & Target Review</h1>
            <p>AI-Powered Analysis of Your Investment Strategy and Price Targets</p>
        </div>

        <div class="main-content">
            <!-- Strategy Review Section -->
            <div class="section" th:if="${strategyAnalysis.strategy_review}">
                <h2>🎯 Strategy Review</h2>
                <p>
                    <span class="strategy-score" th:text="'Validity Score: ' + ${strategyAnalysis.strategy_review.strategy_validity_score}">Score: N/A</span>
                    <span class="assessment-badge" 
                          th:class="${#strings.toLowerCase(strategyAnalysis.strategy_review.current_strategy_assessment)}"
                          th:text="${strategyAnalysis.strategy_review.current_strategy_assessment}">Assessment</span>
                </p>

                <h3>✅ Strategy Strengths</h3>
                <div class="list-section">
                    <ul>
                        <li th:each="strength : ${strategyAnalysis.strategy_review.strategy_strengths}" 
                            th:text="${strength}">Strength</li>
                    </ul>
                </div>

                <h3>⚠️ Areas for Improvement</h3>
                <div class="list-section">
                    <ul>
                        <li th:each="weakness : ${strategyAnalysis.strategy_review.strategy_weaknesses}" 
                            th:text="${weakness}">Weakness</li>
                    </ul>
                </div>

                <h3>🔄 Recommended Strategy Updates</h3>
                <div class="list-section">
                    <ul>
                        <li th:each="update : ${strategyAnalysis.strategy_review.recommended_strategy_updates}" 
                            th:text="${update}">Update</li>
                    </ul>
                </div>
            </div>

            <!-- Target Price Review Section -->
            <div class="section" th:if="${strategyAnalysis.target_price_review}">
                <h2>🎯 Target Price Review</h2>
                <div class="target-review-grid">
                    <div class="target-card" th:each="target : ${strategyAnalysis.target_price_review}">
                        <div class="target-symbol" th:text="${target.symbol}">ETH</div>
                        <p>
                            <span class="assessment-badge" 
                                  th:class="${#strings.toLowerCase(target.current_targets_assessment)}"
                                  th:text="${target.current_targets_assessment}">Assessment</span>
                        </p>

                        <h4>3-Month Target</h4>
                        <div class="target-comparison">
                            <div class="target-current">
                                <h4>Current</h4>
                                <div class="target-price" th:text="${target.current_3month_target}">$5000</div>
                            </div>
                            <div class="target-recommended">
                                <h4>Recommended</h4>
                                <div class="target-price" th:text="${target.recommended_3month_target}">$4500</div>
                                <span class="change-indicator" 
                                      th:class="${#strings.toLowerCase(target.threeMonthTargetChange)}"
                                      th:text="${target.threeMonthTargetChange}">DECREASE</span>
                            </div>
                        </div>

                        <h4>Long-term Target</h4>
                        <div class="target-comparison">
                            <div class="target-current">
                                <h4>Current</h4>
                                <div class="target-price" th:text="${target.current_longterm_target}">$10000</div>
                            </div>
                            <div class="target-recommended">
                                <h4>Recommended</h4>
                                <div class="target-price" th:text="${target.recommended_longterm_target}">$8500</div>
                                <span class="change-indicator" 
                                      th:class="${#strings.toLowerCase(target.longtermTargetChange)}"
                                      th:text="${target.longtermTargetChange}">DECREASE</span>
                            </div>
                        </div>

                        <h4>Rationale</h4>
                        <p th:text="${target.target_rationale}">Target rationale</p>

                        <h4>Risk Factors</h4>
                        <ul>
                            <li th:each="risk : ${target.risk_factors}" th:text="${risk}">Risk factor</li>
                        </ul>

                        <h4>Catalysts</h4>
                        <ul>
                            <li th:each="catalyst : ${target.catalysts}" th:text="${catalyst}">Catalyst</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Holdings Review Section -->
            <div class="section" th:if="${strategyAnalysis.holdings_review}">
                <h2>📊 Holdings Review</h2>
                <div class="holdings-grid">
                    <div class="holding-card" th:each="holding : ${strategyAnalysis.holdings_review}">
                        <div class="holding-header">
                            <div class="holding-symbol" th:text="${holding.symbol}">ETH</div>
                            <div class="fit-score" th:text="'Fit Score: ' + ${holding.strategy_fit_score}">Score: 8</div>
                        </div>

                        <p>
                            <span th:text="'Still Fits Strategy: ' + ${holding.still_fits_strategy}">true</span>
                        </p>

                        <p>
                            <span class="performance-badge" 
                                  th:class="${#strings.toLowerCase(holding.performance_assessment) + '-perf'}"
                                  th:text="${holding.performance_assessment}">GOOD</span>
                        </p>

                        <p>
                            <span class="recommendation-badge" 
                                  th:class="${#strings.toLowerCase(holding.recommendation) + '-rec'}"
                                  th:text="${holding.recommendation}">MAINTAIN</span>
                        </p>

                        <h4>Rationale</h4>
                        <p th:text="${holding.rationale}">Rationale</p>

                        <h4>Concerns</h4>
                        <ul>
                            <li th:each="concern : ${holding.concerns}" th:text="${concern}">Concern</li>
                        </ul>

                        <h4>Opportunities</h4>
                        <ul>
                            <li th:each="opportunity : ${holding.opportunities}" th:text="${opportunity}">Opportunity</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Market Timing Assessment -->
            <div class="market-timing" th:if="${strategyAnalysis.market_timing_assessment}">
                <h3>⏰ Market Timing Assessment</h3>
                <p>
                    <span class="market-phase" th:text="'Market Phase: ' + ${strategyAnalysis.market_timing_assessment.current_market_phase}">UNCERTAIN</span>
                </p>
                <p>
                    <span class="market-phase" th:text="'Timing for Updates: ' + ${strategyAnalysis.market_timing_assessment.timing_for_updates}">GRADUAL</span>
                </p>

                <h4>Market Risks</h4>
                <ul>
                    <li th:each="risk : ${strategyAnalysis.market_timing_assessment.market_risks}" th:text="${risk}">Risk</li>
                </ul>

                <h4>Market Opportunities</h4>
                <ul>
                    <li th:each="opportunity : ${strategyAnalysis.market_timing_assessment.market_opportunities}" th:text="${opportunity}">Opportunity</li>
                </ul>
            </div>

            <!-- Action Plan -->
            <div class="action-plan" th:if="${strategyAnalysis.action_plan}">
                <h3>📋 Action Plan</h3>
                
                <h4>Immediate Actions (This Week)</h4>
                <ul>
                    <li th:each="action : ${strategyAnalysis.action_plan.immediate_actions}" th:text="${action}">Action</li>
                </ul>

                <h4>Target Updates Priority</h4>
                <ul>
                    <li th:each="update : ${strategyAnalysis.action_plan.target_updates_priority}" th:text="${update}">Update</li>
                </ul>

                <h4>Portfolio Adjustments</h4>
                <ul>
                    <li th:each="adjustment : ${strategyAnalysis.action_plan.portfolio_adjustments}" th:text="${adjustment}">Adjustment</li>
                </ul>

                <h4>Monitoring List</h4>
                <ul>
                    <li th:each="item : ${strategyAnalysis.action_plan.monitoring_list}" th:text="${item}">Monitor</li>
                </ul>
            </div>

            <!-- Summary Recommendations -->
            <div class="summary-recommendations" th:if="${strategyAnalysis.summary_recommendations}">
                <h3>🎯 Key Recommendations</h3>
                <ul>
                    <li th:each="recommendation : ${strategyAnalysis.summary_recommendations}" th:text="${recommendation}">Recommendation</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
