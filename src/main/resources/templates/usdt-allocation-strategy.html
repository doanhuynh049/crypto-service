<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDT Allocation Strategy Analysis</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #2ECC71 0%, #27AE60 50%, #229954 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #2ECC71, #27AE60, #229954, #1E8449);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .header {
            text-align: center;
            border-bottom: 3px solid transparent;
            border-image: linear-gradient(90deg, #2ECC71, #27AE60) 1;
            padding-bottom: 25px;
            margin-bottom: 35px;
            position: relative;
        }
        .header::after {
            content: 'üí∞ üíµ üìà';
            font-size: 24px;
            display: block;
            margin-top: 10px;
            opacity: 0.7;
        }
        h1 {
            color: #1E8449;
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .subtitle {
            color: #666;
            font-size: 1.1em;
            margin: 10px 0;
            font-weight: 300;
        }
        .timestamp {
            color: #999;
            font-size: 0.9em;
            font-style: italic;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid #2ECC71;
            position: relative;
        }

        .section h2 {
            color: #1E8449;
            margin-top: 0;
            font-size: 1.6em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .deployment-recommendation {
            background: linear-gradient(135deg, #E8F8F5, #D5F4E6);
            border-left-color: #27AE60;
        }

        .market-timing {
            background: linear-gradient(135deg, #FEF9E7, #FCF3CF);
            border-left-color: #F39C12;
        }

        .reserve-strategy {
            background: linear-gradient(135deg, #EAF2F8, #D6EAF8);
            border-left-color: #3498DB;
        }

        .existing-positions {
            background: linear-gradient(135deg, #F4ECF7, #EBDEF0);
            border-left-color: #9B59B6;
        }

        .new-opportunities {
            background: linear-gradient(135deg, #FDEDEC, #FADBD8);
            border-left-color: #E74C3C;
        }

        .allocation-breakdown {
            background: linear-gradient(135deg, #F0F3FF, #E6EFFF);
            border-left-color: #5DADE2;
        }

        .execution-timeline {
            background: linear-gradient(135deg, #FDF2E9, #FDEAA7);
            border-left-color: #F4D03F;
        }

        .risk-considerations {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-left-color: #FF5722;
        }

        .key-recommendations {
            background: linear-gradient(135deg, #E8F6F3, #D1F2EB);
            border-left-color: #16A085;
        }

        .recommendation-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            margin: 10px 0;
        }

        .deploy-now { background: #2ECC71; color: white; }
        .wait-for-dip { background: #F39C12; color: white; }
        .gradual-deployment { background: #3498DB; color: white; }
        .mixed-approach { background: #9B59B6; color: white; }

        .allocation-item {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #2ECC71;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .allocation-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .symbol {
            font-weight: bold;
            font-size: 1.2em;
            color: #1E8449;
        }

        .percentage {
            font-size: 1.1em;
            font-weight: bold;
            color: #27AE60;
        }

        .amount {
            font-size: 1.1em;
            font-weight: bold;
            color: #229954;
        }

        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .breakdown-table th,
        .breakdown-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .breakdown-table th {
            background-color: #2ECC71;
            color: white;
            font-weight: bold;
        }

        .breakdown-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .action-list {
            list-style: none;
            padding: 0;
        }

        .action-list li {
            background: white;
            margin: 8px 0;
            padding: 12px;
            border-radius: 5px;
            border-left: 3px solid #2ECC71;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .trigger-list {
            background: #E8F8F5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .trigger-list ul {
            margin: 5px 0;
            padding-left: 20px;
        }

        .opportunity-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .sector-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #1E8449;
        }

        .risk-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .risk-low { background: #2ECC71; color: white; }
        .risk-medium { background: #F39C12; color: white; }
        .risk-high { background: #E74C3C; color: white; }

        .suggested-assets {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }

        .asset-tag {
            background: #E8F8F5;
            color: #1E8449;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .primary-rec {
            background: #2ECC71;
            color: white;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            .allocation-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .opportunity-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ USDT Allocation Strategy</h1>
            <p class="subtitle">Strategic Deployment Analysis for Available Capital</p>
            <p class="timestamp" th:text="'Generated: ' + ${timestamp}"></p>
        </div>

        <!-- Deployment Recommendation -->
        <div class="section deployment-recommendation">
            <h2>üéØ Deployment Recommendation</h2>
            <div class="recommendation-badge"
                 th:classappend="${analysisData['deployment_recommendation'] == 'DEPLOY_NOW'} ? 'deploy-now' : (${analysisData['deployment_recommendation'] == 'WAIT_FOR_DIP'} ? 'wait-for-dip' : (${analysisData['deployment_recommendation'] == 'GRADUAL_DEPLOYMENT'} ? 'gradual-deployment' : 'mixed-approach'))"
                 th:text="${analysisData['deployment_recommendation']}">
            </div>
        </div>

        <!-- Market Timing Assessment -->
        <div class="section market-timing">
            <h2>üìä Market Timing Assessment</h2>
            <p th:text="${analysisData['market_timing_assessment']}"></p>
        </div>

        <!-- Reserve Strategy -->
        <div class="section reserve-strategy" th:if="${analysisData['reserve_strategy']}">
            <h2>üõ°Ô∏è Reserve Strategy</h2>
            <div class="allocation-item">
                <div class="allocation-header">
                    <span class="percentage" th:text="${analysisData['reserve_strategy']['recommended_reserve_percentage']}"></span>
                    <span class="amount" th:text="${analysisData['reserve_strategy']['reserve_amount']}"></span>
                </div>
                <p><strong>Purpose:</strong> <span th:text="${analysisData['reserve_strategy']['reasoning']}"></span></p>

                <div class="trigger-list" th:if="${analysisData['reserve_strategy']['deployment_triggers']}">
                    <strong>Deployment Triggers:</strong>
                    <ul>
                        <li th:each="trigger : ${analysisData['reserve_strategy']['deployment_triggers']}" th:text="${trigger}"></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Existing Positions Enhancement -->
        <div class="section existing-positions" th:if="${analysisData['existing_positions_enhancement']}">
            <h2>üìà Enhance Existing Positions</h2>
            <div th:each="position : ${analysisData['existing_positions_enhancement']}" class="allocation-item">
                <div class="allocation-header">
                    <span class="symbol" th:text="${position['symbol']}"></span>
                    <div>
                        <span class="percentage" th:text="${position['allocation_percentage']}"></span>
                        <span class="amount" th:text="${position['allocation_amount']}"></span>
                    </div>
                </div>
                <p><strong>Current Weight:</strong> <span th:text="${position['current_weight_in_portfolio']}"></span></p>
                <p><strong>Target Weight:</strong> <span th:text="${position['target_weight_after_addition']}"></span></p>
                <p><strong>Entry Strategy:</strong> <span th:text="${position['entry_strategy']}"></span></p>
                <p><strong>Target Entry Price:</strong> <span th:text="${position['target_entry_price']}"></span></p>
                <p><strong>Rationale:</strong> <span th:text="${position['rationale']}"></span></p>
            </div>
        </div>

        <!-- New Opportunities -->
        <div class="section new-opportunities" th:if="${analysisData['new_opportunities']}">
            <h2>üöÄ New Investment Opportunities</h2>
            <div th:each="opportunity : ${analysisData['new_opportunities']}" class="opportunity-card">
                <div class="opportunity-header">
                    <span class="sector-name" th:text="${opportunity['sector']}"></span>
                    <span class="risk-badge"
                          th:classappend="${opportunity['risk_level'] == 'LOW'} ? 'risk-low' : (${opportunity['risk_level'] == 'MEDIUM'} ? 'risk-medium' : 'risk-high')"
                          th:text="${opportunity['risk_level']} + ' RISK'">
                    </span>
                </div>

                <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                    <span class="percentage" th:text="${opportunity['allocation_percentage']}"></span>
                    <span class="amount" th:text="${opportunity['allocation_amount']}"></span>
                </div>

                <div class="suggested-assets" th:if="${opportunity['suggested_assets']}">
                    <span th:each="asset, iterStat : ${opportunity['suggested_assets']}"
                          class="asset-tag"
                          th:classappend="${asset == opportunity['primary_recommendation']} ? 'primary-rec' : ''"
                          th:text="${asset}">
                    </span>
                </div>

                <p><strong>Primary Recommendation:</strong> <span th:text="${opportunity['primary_recommendation']}"></span></p>
                <p><strong>Entry Strategy:</strong> <span th:text="${opportunity['entry_strategy']}"></span></p>
                <p><strong>Target Portfolio Allocation:</strong> <span th:text="${opportunity['target_allocation_in_portfolio']}"></span></p>
                <p><strong>Rationale:</strong> <span th:text="${opportunity['rationale']}"></span></p>
            </div>
        </div>

        <!-- Allocation Breakdown -->
        <div class="section allocation-breakdown" th:if="${analysisData['allocation_breakdown']}">
            <h2>üìä Allocation Breakdown</h2>

            <div th:if="${analysisData['allocation_breakdown']['keep_as_usdt_reserve']}" class="allocation-item">
                <h3>üíµ USDT Reserve</h3>
                <div class="allocation-header">
                    <span class="percentage" th:text="${analysisData['allocation_breakdown']['keep_as_usdt_reserve']['percentage']}"></span>
                    <span class="amount" th:text="${analysisData['allocation_breakdown']['keep_as_usdt_reserve']['amount']}"></span>
                </div>
                <p><strong>Purpose:</strong> <span th:text="${analysisData['allocation_breakdown']['keep_as_usdt_reserve']['purpose']}"></span></p>
            </div>

            <div th:if="${analysisData['allocation_breakdown']['add_to_existing_positions']}" class="allocation-item">
                <h3>üìà Add to Existing Positions</h3>
                <div class="allocation-header">
                    <span class="percentage" th:text="${analysisData['allocation_breakdown']['add_to_existing_positions']['percentage']}"></span>
                    <span class="amount" th:text="${analysisData['allocation_breakdown']['add_to_existing_positions']['amount']}"></span>
                </div>

                <table class="breakdown-table" th:if="${analysisData['allocation_breakdown']['add_to_existing_positions']['breakdown']}">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Percentage</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${analysisData['allocation_breakdown']['add_to_existing_positions']['breakdown']}">
                            <td th:text="${item['symbol']}"></td>
                            <td th:text="${item['percentage']}"></td>
                            <td th:text="${item['amount']}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div th:if="${analysisData['allocation_breakdown']['new_positions']}" class="allocation-item">
                <h3>üöÄ New Positions</h3>
                <div class="allocation-header">
                    <span class="percentage" th:text="${analysisData['allocation_breakdown']['new_positions']['percentage']}"></span>
                    <span class="amount" th:text="${analysisData['allocation_breakdown']['new_positions']['amount']}"></span>
                </div>

                <table class="breakdown-table" th:if="${analysisData['allocation_breakdown']['new_positions']['breakdown']}">
                    <thead>
                        <tr>
                            <th>Sector</th>
                            <th>Percentage</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${analysisData['allocation_breakdown']['new_positions']['breakdown']}">
                            <td th:text="${item['sector']}"></td>
                            <td th:text="${item['percentage']}"></td>
                            <td th:text="${item['amount']}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Execution Timeline -->
        <div class="section execution-timeline" th:if="${analysisData['execution_timeline']}">
            <h2>‚è∞ Execution Timeline</h2>

            <div th:if="${analysisData['execution_timeline']['immediate_actions']}">
                <h3>üö® Immediate Actions</h3>
                <ul class="action-list">
                    <li th:each="action : ${analysisData['execution_timeline']['immediate_actions']}" th:text="${action}"></li>
                </ul>
            </div>

            <div th:if="${analysisData['execution_timeline']['short_term_actions']}">
                <h3>üìÖ Short-term Actions (1-4 weeks)</h3>
                <ul class="action-list">
                    <li th:each="action : ${analysisData['execution_timeline']['short_term_actions']}" th:text="${action}"></li>
                </ul>
            </div>

            <div th:if="${analysisData['execution_timeline']['contingency_plans']}">
                <h3>üîÑ Contingency Plans</h3>
                <ul class="action-list">
                    <li th:each="plan : ${analysisData['execution_timeline']['contingency_plans']}" th:text="${plan}"></li>
                </ul>
            </div>
        </div>

        <!-- Risk Considerations -->
        <div class="section risk-considerations" th:if="${analysisData['risk_considerations']}">
            <h2>‚ö†Ô∏è Risk Considerations</h2>

            <div th:if="${analysisData['risk_considerations']['main_risks']}">
                <h3>üìâ Main Risks</h3>
                <ul class="action-list">
                    <li th:each="risk : ${analysisData['risk_considerations']['main_risks']}" th:text="${risk}"></li>
                </ul>
            </div>

            <div th:if="${analysisData['risk_considerations']['risk_mitigation_strategies']}">
                <h3>üõ°Ô∏è Risk Mitigation Strategies</h3>
                <ul class="action-list">
                    <li th:each="strategy : ${analysisData['risk_considerations']['risk_mitigation_strategies']}" th:text="${strategy}"></li>
                </ul>
            </div>

            <div th:if="${analysisData['risk_considerations']['portfolio_impact']}">
                <h3>üìä Portfolio Impact Assessment</h3>
                <div class="allocation-item">
                    <p th:text="${analysisData['risk_considerations']['portfolio_impact']}"></p>
                </div>
            </div>
        </div>

        <!-- Key Recommendations -->
        <div class="section key-recommendations" th:if="${analysisData['key_recommendations']}">
            <h2>üéØ Key Recommendations</h2>
            <ul class="action-list">
                <li th:each="recommendation : ${analysisData['key_recommendations']}" th:text="${recommendation}"></li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #eee; color: #666; font-size: 0.9em;">
            <p>üìä This analysis is generated based on current market conditions and portfolio composition</p>
            <p>‚ö†Ô∏è Please conduct your own research and consider your risk tolerance before making investment decisions</p>
        </div>
    </div>
</body>
</html>
